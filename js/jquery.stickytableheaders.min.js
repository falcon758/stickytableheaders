(function(e,t,n){"use strict";function s(n,r){var s=this;var o=[];var u=0;s.$el=e(n);s.el=n;s.$window=e(t);s.$clonedHeader=e();s.$originalHeader=e();s.isCloneVisible=false;s.leftOffset=null;s.topOffset=null;s.init=function(){s.options=e.extend({},i,r);s.$el.each(function(){var t=e(this);t.css("padding",0);t.wrap('<div class="divTableWithFloatingHeader"></div>');s.$originalHeader=e("thead",t);s.$clonedHeader=s.$originalHeader.clone();s.$originalHeader.each(function(t,n){o[t]=parseInt(e(this).outerHeight(true))});s.$clonedHeader.each(function(t,n){e(this).addClass("tableFloatingHeader");e(this).css({position:"fixed",top:0,"z-index":1,"margin-top":u,display:"none"});u+=o[t]});s.$originalHeader.each(function(){e(this).addClass("tableFloatingHeaderOriginal")});s.$originalHeader.each(function(t,n){e(this).after(s.$clonedHeader[t])});s.$clonedHeader.each(function(t,n){var r=e(this);e("th",this).click(function(n){var i=e("th",r).index(this);e("th",s.$originalHeader[t]).eq(i).click()})});t.bind("sortEnd",s.updateWidth);t.bind("sortEnd",s.updateHeight)});s.updateWidth();s.updateHeight();s.toggleHeaders();s.$window.scroll(s.toggleHeaders);s.$window.resize(s.toggleHeaders);s.$window.resize(s.updateWidth);s.$window.resize(s.updateHeight)};s.toggleHeaders=function(){s.$el.each(function(){var t=e(this);var n=isNaN(s.options.fixedOffset)?s.options.fixedOffset.height():s.options.fixedOffset;var r=t.offset();var i=s.$window.scrollTop()+n;var o=s.$window.scrollLeft();if(i>r.top&&i<r.top+t.height()){var u=r.left-o;if(s.isCloneVisible&&u===s.leftOffset&&n===s.topOffset){return}s.$clonedHeader.each(function(){e(this).css({top:n,left:u,display:"block"})});s.$originalHeader.each(function(){e(this).css("visibility","hidden")});s.isCloneVisible=true;s.leftOffset=u;s.topOffset=n}else if(s.isCloneVisible){s.$clonedHeader.each(function(){e(this).css("display","none")});s.$originalHeader.each(function(){e(this).css("visibility","visible")});s.isCloneVisible=false}})};s.updateWidth=function(){s.$clonedHeader.each(function(t,n){e("th",this).each(function(n){var r=e(this);var i=e("th",s.$originalHeader[t]).eq(n);r.className=i.attr("class")||"";r.css("width",i.width())})});s.$clonedHeader.each(function(t,n){console.log(s.$originalHeader[t]);e(this).css("width",s.$originalHeader[t].offsetWidth)})};s.updateHeight=function(){s.$clonedHeader.each(function(t,n){e("th",this).each(function(n){var r=e(this);var i=e("th",s.$originalHeader[t]).eq(n);r.css("height",i.height())})});s.$clonedHeader.each(function(t,n){console.log(s.$originalHeader[t]);e(this).css("height",s.$originalHeader[t].offsetHeight)})};s.init()}var r="stickyTableHeaders";var i={fixedOffset:0};e.fn[r]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+r)){e.data(this,"plugin_"+r,new s(this,t))}})}})(jQuery,window)
